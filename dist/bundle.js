(()=>{"use strict";const e=e=>{var t=document.querySelector("#unity-container"),n=document.querySelector("#unity-canvas"),o=document.querySelector("#unity-loading-bar"),i=document.querySelector("#unity-progress-bar-full"),r=document.querySelector("#unity-fullscreen-button"),l=document.querySelector("#unity-warning"),a="game/"+e+"/Build",s=a+"/"+e+".loader.js",d={dataUrl:a+`/${e}.data`,frameworkUrl:a+`/${e}.framework.js`,codeUrl:a+`/${e}.wasm`,streamingAssetsUrl:"StreamingAssets",companyName:"DefaultCompany",productName:"Space Shooter",productVersion:"1.0",showBanner:function(e,t){function n(){l.style.display=l.children.length?"block":"none"}var o=document.createElement("div");o.innerHTML=e,l.appendChild(o),"error"==t?o.style="background: red; padding: 10px;":("warning"==t&&(o.style="background: yellow; padding: 10px;"),setTimeout((function(){l.removeChild(o),n()}),5e3)),n()}};if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){var c=document.createElement("meta");c.name="viewport",c.content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes",document.getElementsByTagName("head")[0].appendChild(c),t.className="unity-mobile",n.className="unity-mobile"}o.style.display="block";var u=document.createElement("script");u.src=s,u.onload=()=>{createUnityInstance(n,d,(e=>{i.style.width=100*e+"%"})).then((e=>{window.unityInstance=e,o.style.display="none",r.onclick=()=>{e.SetFullscreen(1)}})).catch((e=>{alert(e)}))},document.body.appendChild(u),document.querySelector("#game").style.display="block",document.querySelector("progress").style.display="none"},t=()=>{window.unityInstance.Quit()};var n=parseInt(localStorage.getItem("instNum"))||0;const o=4,i=6,r=8;var l=!1,a=localStorage.getItem("end");window.subID="not_set";const s=()=>{localStorage.clear(),window.location.reload()};function d(){y(),document.getElementById("next-button").addEventListener("click",p),document.getElementById("prev-button").addEventListener("click",g),document.querySelector("#reload").addEventListener("click",s),a?window.endGame():0!=n&&S(n)}const c=e=>{document.querySelector("#"+e).classList.add("active-step")},u=e=>{document.querySelector("#"+e).classList.add("done-step")},y=()=>{window.subID=("prolificID",new URL(document.location).searchParams.get("prolificID")||"random-"+Math.floor(1e10*Math.random())),document.querySelector(".subID").innerHTML="id: "+window.subID},m=()=>{document.querySelector("#panel").style.display="none"},p=()=>{l||(w(),n++,S(n))},g=()=>{l||(w(),n--,S(n))},h=()=>{document.querySelector("#next-button").style.display="none",document.querySelector("#prev-button").style.display="none"},v=()=>{document.querySelector("#next-button").style.display="inline-flex",document.querySelector("#prev-button").style.display="inline-flex"},b=()=>{document.querySelector("#prev-button").style.display="none"},w=()=>{l=!0,setTimeout((()=>{l=!1}),300)},S=async t=>{t=parseInt(t),localStorage.setItem("instNum",t),0==t?(document.querySelector("#panel").innerHTML='\n  <div class="card-text">\n            \x3c!-- <h1>Welcome to this</h1><br> --\x3e\n            <h1>Welcome to our</h1><br><h1 style="color: var(--primary); font-weight: bolder;">experiment!</h1>\n            \x3c!-- <h1>Welcome to this <span style = "display: block; color: var(--primary)"> experiment!</span></h1> --\x3e\n            \x3c!-- <h1><b style="color: var(--primary)"> experiment!</b></h1> --\x3e\n        </div>\n            \x3c!-- <p>Some text here</p> --\x3e\n            <div class="card-img">\n              <img class="front-img" src="images/spaceship_illustration.png" alt="" loading="lazy">\n            </div>\n',document.querySelector("#panel").style.display="flex",document.querySelector("#prev-button").style.display="none",document.querySelector("#game").style.display="none"):t==o?(m(),h(),c("training1"),u("introduction"),e("training1")):t==i?(m(),h(),c("training2"),u("training1"),u("introduction"),e("training2")):t==r?(m(),h(),c("experiment"),u("introduction"),u("training1"),u("training2"),document.querySelector("#game").style.display="block",e("main")):(document.querySelector("#panel").innerHTML='<progress style="width:35%; margin: auto"></progress>',document.querySelector("#panel").innerHTML=await(async e=>{document.querySelector("#panel").innerHTML='<progress style="width:35%; margin: auto"></progress>';const t=await fetch(e).then((e=>e.text()));let n=`<zero-md src="${e}">\n      <template data-merge="append">\n        <link rel="stylesheet" href="lib/css/admonition.css">\n        <style>\n          .markdown-body {\n            color: whitesmoke;\n            font-size: larger;\n            width: 85%; \n            /* align text center */\n            margin: auto;\n          }\n        </style>\n      </template>\n      </zero-md>`;if(t.includes("display=")){let e=t.split("display=")[1].split("---\x3e")[0];document.querySelector("#panel").style.display=e}return t.includes("admonition=")&&(n+=`${t.split("admonition=")[1].split("---\x3e")[0]}</div>`),t.includes("video=")&&(n=n.replace("width: 85%",""),n='<div class="grid"><div class="s6">'+n,n+=`<div class="s6">\n      <div class="video-inst">\n      <video width="70%" height="100%" controls autoplay>\n        <source src="./instructions/videos/${t.split("video=")[1].split("---\x3e")[0]}">\n        Your browser does not support the video tag.\n        </video>\n      </div>\n      </div>\n      </div>`),n})(`./instructions/inst_${t}.md`),v(),(0==t||[o,i,r].includes(t-1))&&b())};window.endGame=()=>{t(),localStorage.setItem("end",!0),h(),u("introduction"),u("experiment"),c("survey"),document.querySelector("#game").style.display="none",document.querySelector("#panel").style.display="flex",document.querySelector("#panel").innerHTML='\n            <div class="center-align" style="margin: auto">\n            <h1 style="display: block">ðŸš€Thank you!ðŸš€</h1>\n            <br>\n            <br>\n            <p>Thank you for participating in our experiment!</p>\n            <p>Please click the button below and answer a few questions to complete your submission.</p>\n            <br>\n            <button id="submit-button" class="btn btn-primary">Survey</button>\n            </div>\n    '},window.endTrainingRL=()=>{t(),u("introduction"),u("training1"),u("training2"),c("experiment"),document.querySelector("#game").style.display="none",document.querySelector("#panel").style.display="flex",v(),S(n=7),b()},window.endTrainingPerceptual=()=>{t(),u("introduction"),u("training1"),c("training2"),document.querySelector("#game").style.display="none",document.querySelector("#panel").style.display="flex",v(),S(n=5),b()},"loading"!==document.readyState?d():document.addEventListener("DOMContentLoaded",d)})();